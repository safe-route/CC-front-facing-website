<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Safe Route</title>
    <!-- Fontawesome CDN Link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>

    <link rel="stylesheet" href="../static/style.css">
    <link rel="stylesheet" href="../static/styles.css">

    <!--Leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    <!-- Leaflet js: Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>
    <!-- Geopackage plugin via unpkg -->
    <script src="https://unpkg.com/@ngageoint/geopackage@4.1.0/dist/geopackage.min.js"></script>

</head>

<body class="animate-in">
    <header>
        <a href="#"><img class="logo" src="../static/images/Logo.svg" alt="Logo"></a>
        <a href="#" class="textLogo">Safe Route</a>
        <ul id="menu">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#product">Download</a></li>
            <li><a href="#overview">Overview</a></li>
        </ul>
    </header>
    <section id="home" class="container">
        <div style="width: 70%;">
            <p><h1>Safe Route</h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit 
            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur 
            occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit 
            anim id est laborum.
            </p>
        </div>
        <div style="width: 29%;">
            <img class="phone" src="../static/images/phone.png">
        </div>
    </section>
    <section id="about" class="container-col">
        <div style="height: 20%;">
            <h1>Meet Our Team</h1>
        </div>
        <div class="container-slideshow" style="height: 90%;">
            <div class="container-card">
                <input type="radio" name="dot" id="one">
                <input type="radio" name="dot" id="two">
                 <div class="main-card">
                        <div class="cards">
                            <div class="card">
                                <div class="content">
                                    <div class="img">
                                        <img src="../static/images/img1.jpg" alt="">
                                    </div>
                                    <div class="details">
                                        <div class="name">Christopher Chandrasaputra</div>
                                        <div class="job">Machine Learning</div>
                                    </div>
                                    <div class="media-icons">
                                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#"><i class="fab fa-twitter"></i></a>
                                        <a href="#"><i class="fab fa-instagram"></i></a>
                                        <a href="#"><i class="fab fa-youtube"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="content">
                                    <div class="img">
                                        <img src="../static/images/img2.jpg" alt="">
                                    </div>
                                    <div class="details">
                                        <div class="name">Fillah Akbar Firdausyah</div>
                                        <div class="job">Android</div>
                                    </div>
                                    <div class="media-icons">
                                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#"><i class="fab fa-twitter"></i></a>
                                        <a href="#"><i class="fab fa-instagram"></i></a>
                                        <a href="#"><i class="fab fa-youtube"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="content">
                                    <div class="img">
                                        <img src="../static/images/img3.jpg" alt="">
                                    </div>
                                <div class="details">
                                    <div class="name">I Putu Cahya Adi Ganesha</div>
                                    <div class="job">Cloud Computing</div>
                                </div>
                                <div class="media-icons">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-twitter"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                    <a href="#"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="cards">
                        <div class="card">
                            <div class="content">
                                <div class="img">
                                    <img src="../static/images/img4.jpg" alt="">
                                </div>
                                <div class="details">
                                    <div class="name">Hanif Adam Al Abraar</div>
                                    <div class="job">Machine Learning</div>
                                </div>
                                <div class="media-icons">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-twitter"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                    <a href="#"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="content">
                                <div class="img">
                                    <img src="../static/images/img5.jpg" alt="">
                                </div>
                                <div class="details">
                                    <div class="name">Ikhsan Cahya Mardika</div>
                                    <div class="job">Android</div>
                                </div>
                                <div class="media-icons">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-twitter"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                    <a href="#"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="content">
                                <div class="img">
                                    <img src="../static/images/img6.jpeg" alt="">
                                </div>
                                <div class="details">
                                    <div class="name">Muhammad Anggi Wirahmat</div>
                                    <div class="job">Cloud Computing</div>
                                </div>
                                <div class="media-icons">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-twitter"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                    <a href="#"><i class="fab fa-youtube"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>   
            </div>
            <div class="button">
                <center>
                    <label for="one" class="active one"></label>
                    <label for="two" class="two"></label>
                </center>
            </div>
        </div>
    </section>
    <section id="product" class="container-col">
        <div>
            <h1>Get Our App Now</h1>
            <p>Aplikasi yang ... Click the link button bellow</p>
        </div>
        <center>
            <img class="phone2" src="../static/images/2phonedown.png">
        </center>
        <!-- Google Play button -->
        <center>
            <a href="#" target="_blank" class="market-btn google-btn" role="button">
                <span class="market-button-subtitle">Download on the</span>
                <span class="market-button-title">Google Play</span>
            </a>
        </center>
        
    </section>
    <section id="overview" class="container-col">
        <div style="height: 15%;">
            <h1>Overview App</h1>
        </div>
        <br>
        <div id="map"></div>
        <script src="https://unpkg.com/@ngageoint/leaflet-geopackage@2.0.4/dist/leaflet-geopackage.min.js"></script>

        <script>
    
            // Initialize the map
            var map = L.map('map').setView([-6.180212, 106.81857], 11);

            // Set map boundary and bouce back
            map.setMaxBounds(map.getBounds());

            // Load a tile layer, load stamen as tile layer
            L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}', {
                subdomains: 'abcd',
                minZoom: 1,
                maxZoom: 16,
                ext: 'png',
            }).addTo(map);

            var info = L.control();

            info.onAdd = function (map) {
                this._div = L.DomUtil.create('div', 'info'); // Create a div with a class "info"
                this.update();
                return this._div;
            };

            // Method that we will use to update the control based on feature properties passed
            info.update = function (props) {
                this._div.innerHTML = '<h4>Jakarta Crime Rate</h4>' +  (props ?
                '<b>' + props.name + '</b><br />' + props.crimerate + ' %'
                : 'Hover over a district');
            };

            info.addTo(map);
    
    //var popup = L.popup();

    //function onMapClick(e) {
    //popup
    //   .setLatLng(e.latlng)
    //   .setContent("You clicked the map at " + e.latlng.toString())
    //   .openOn(map);
    //}
    //map.on('click', onMapClick);

            function PointCrime(){
                fetch("../static/assets/clustering.json")
                .then(response=>response.json())
                .then(data=>{
                var mydata = data;
                var index = mydata.length;
                for (i=0; i<=index-1; i++){
                    var circle = L.circle([mydata[i].latitude, mydata[i].longitude], {
                        color: 'red',
                        fillColor: '#f03',
                        fillOpacity: 0.5,
                        radius: mydata[i].range
                    }).addTo(map);
                circle.bindPopup("Daerah Berbahaya");
                }
            });
        }
        PointCrime();

        function highlightFeature(e) {
            var layer = e.target;

            layer.setStyle({
                weight: 5,
                color: '#666',
                dashArray: '',
                fillOpacity: 0.7
            });

            if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
                layer.bringToFront();
            }
            info.update(layer.feature.properties);
        }

        function resetHighlight(e) {
            jakartaDistrict.resetStyle(e.target);
            info.update();
        }

        function zoomToFeature(e) {
	    	map.fitBounds(e.target.getBounds());
  	    }
    
        // Use geopackage to set a layer

        var jakartaDistrict = L.geoPackageFeatureLayer([], {
            geoPackageUrl: "../static/assets/Kecamatan-DKI-Jakarta.gpkg",
            layerName: 'Kecamatan-DKI-Jakarta',
            onEachFeature : function(feature, layer, e){
                var name = feature.properties.name;
                var crimerate = feature.properties.crimerate;
                layer.on('click', function() {layer.bindPopup(name + ": " + crimerate);});

        //layer.on('mouseout', function() {layer.closePopup();});

                layer.on({
                    mouseover: highlightFeature,
                    mouseout: resetHighlight,
            
            //click: zoomToFeature
                });
            }
        }).addTo(map);

        geojson = L.geoJson(jakartaDistrict, {
            style: style,
            onEachFeature: onEachFeature
        }).addTo(map);
        </script>
    </section>
</body>
</html>














